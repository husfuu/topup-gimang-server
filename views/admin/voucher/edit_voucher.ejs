<%- include ../../partials/header.ejs %>
  <%- include ../../partials/navbar.ejs %>
    <%- include ../../partials/sidebar.ejs %>
      <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
          <div class="container-fluid">
            <div class="row mb-2">
              <div class="col-sm-6">
                <h1>Voucher</h1>
              </div>
              <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                  <li class="breadcrumb-item"><a href="/">Home</a></li>
                  <li class="breadcrumb-item"><a href="/voucher">Voucher</a></li>
                  <li class="breadcrumb-item active">Ubah</li>
                </ol>
              </div>
            </div>
          </div><!-- /.container-fluid -->
        </section>

        <!-- Main content -->
        <section class="content">
          <div class="container-fluid">
            <div class="row">
              <div class="col-12">
                <div class="card card-primary">
                  <div class="card-header">
                    <h3 class="card-title">Form ubah voucher <%= voucher.name %>
                    </h3>
                  </div>
                  <!-- /.card-header -->
                  <!-- form start -->
                  <form action="/vouchers/edit/<%= voucher.id %>" method="POST"
                    >
                    <div class="card-body">
                      <div class="form-group">
                        <label for="name">Nama game</label>
                        <input type="text" name="name" value="<%= voucher.name %>" class="form-control" id="name"
                          placeholder="Masukan nama game" required>
                      </div>
                      <div class="form-group">
                        <label>Kategori</label>
                        <select class="form-control select2" style="width: 100%;" name="categoryId" required>
                          <option selected="selected">Pilih kategori</option>
                          <% categories.forEach(category=>{ %>
                            <option value="<%= category.id %>" <%
                              if(category.id.toString() === voucher?.categoryId.toString()) { %>
                              selected
                              <% }%>
                                >
                                <%= category.name %>
                            </option>
                            <% }) %>

                        </select>
                      </div>
                      <div class="form-group">
                        <label>Nominal</label>
                        <div class="select2-purple">
                          <select class="form-control select2" multiple="multiple" data-placeholder="Pilih nominal"
                            style="width: 100%;" name="nominalIds" required>
                            <% nominals.forEach(nominal=>{ %>
                              <option value="<%= nominal.id %>" <% voucher.Nominals.forEach(voucherNominal=>{ %>
                                <% if(nominal.id.toString()===voucherNominal.id.toString()){ %>
                                  selected
                                  <% } %>
                                    <% }) %>
                                      >
                                      <%= nominal.coinName %>
                                      <%= nominal.coinQuantity %>
                              </option>
                              <% }) %>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="card-footer">
                      <button type="submit" class="btn btn-primary">Simpan</button>
                    </div>
                  </form>
                </div>
              </div>
              <!-- /.col -->
            </div>
            <!-- /.row -->
          </div>
          <!-- /.container-fluid -->
        </section>
        <!-- /.content -->
      </div>

      <%- include ../../partials/footer.ejs %>
      <%- include ../../partials/js.ejs %>